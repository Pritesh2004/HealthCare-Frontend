<div class="signup-page">
    <div *ngIf="!otpSent" class="signup-container">
      <p id="signup">SIGNUP</p>
      <form class="signup-form" #signupForm="ngForm" (submit)="sendOTP(user.email)">
        
        <!-- Username Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="text" id="username" [(ngModel)]="user.username" #username="ngModel"
                   name="username" required minlength="4" maxlength="20" pattern="[a-zA-Z0-9]+"
                   placeholder="Username">
            <span *ngIf="username.invalid && username.touched" style="color: red;">
              <span *ngIf="username.errors?.['required']">Username is required.</span>
              <span *ngIf="username.errors?.['minlength']">Username must be at least 4 characters long.</span>
              <span *ngIf="username.errors?.['maxlength']">Username cannot exceed 20 characters.</span>
              <span *ngIf="username.errors?.['pattern']">Username can only contain letters and numbers.</span>
            </span>
          </div>
        </div>
        
        <!-- First Name Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="text" id="firstName" [(ngModel)]="user.firstName" #firstName="ngModel"
                   name="firstName" required minlength="2" maxlength="50" pattern="[a-zA-Z ]+"
                   placeholder="First Name">
            <span *ngIf="firstName.invalid && firstName.touched" style="color: red;">
              <span *ngIf="firstName.errors?.['required']">First Name is required.</span>
              <span *ngIf="firstName.errors?.['minlength']">First Name must be at least 2 characters long.</span>
              <span *ngIf="firstName.errors?.['maxlength']">First Name cannot exceed 50 characters.</span>
              <span *ngIf="firstName.errors?.['pattern']">First Name can only contain letters and spaces.</span>
            </span>
          </div>
        </div>
        
        <!-- Last Name Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="text" id="lastName" [(ngModel)]="user.lastName" #lastName="ngModel"
                   name="lastName" required minlength="2" maxlength="50" pattern="[a-zA-Z ]+"
                   placeholder="Last Name">
            <span *ngIf="lastName.invalid && lastName.touched" style="color: red;">
              <span *ngIf="lastName.errors?.['required']">Last Name is required.</span>
              <span *ngIf="lastName.errors?.['minlength']">Last Name must be at least 2 characters long.</span>
              <span *ngIf="lastName.errors?.['maxlength']">Last Name cannot exceed 50 characters.</span>
              <span *ngIf="lastName.errors?.['pattern']">Last Name can only contain letters and spaces.</span>
            </span>
          </div>
        </div>
        
        <!-- Email Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="email" id="email" [(ngModel)]="user.email" #email="ngModel"
                   name="email" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                   placeholder="Email">
            <span *ngIf="email.invalid && email.touched" style="color: red;">
              <span *ngIf="email.errors?.['required']">Email is required.</span>
              <span *ngIf="email.errors?.['pattern']">Please enter a valid email address.</span>
            </span>
          </div>
        </div>
        
        <!-- Password Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="password" id="password" [(ngModel)]="user.password" #password="ngModel"
                   name="password" required minlength="6" maxlength="20"
                   pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$"
                   placeholder="Password">
            <span *ngIf="password.invalid && password.touched" style="color: red;">
              <span *ngIf="password.errors?.['required']">Password is required.</span>
              <span *ngIf="password.errors?.['minlength']">Password must be at least 6 characters long.</span>
              <span *ngIf="password.errors?.['maxlength']">Password cannot exceed 20 characters.</span>
              <span *ngIf="password.errors?.['pattern']">Password must contain at least one uppercase letter, one lowercase letter, and one number.</span>
            </span>
          </div>
        </div>

         <!-- Phone Number Field -->
      <div class="input-div">
        <div class="input-divs">
          <input type="tel" id="phoneNumber" [(ngModel)]="user.phoneNumber" #phoneNumber="ngModel"
                 name="phoneNumber" required pattern="[0-9]{10}"
                 placeholder="Phone Number">
          <span *ngIf="phoneNumber.invalid && phoneNumber.touched" style="color: red;">
            <span *ngIf="phoneNumber.errors?.['required']">Phone Number is required.</span>
            <span *ngIf="phoneNumber.errors?.['pattern']">Phone Number must be 10 digits.</span>
          </span>
        </div>
      </div>
        
        <!-- Address Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="text" id="address" [(ngModel)]="user.address" #address="ngModel"
                   name="address" required placeholder="Address">
            <span *ngIf="address.invalid && address.touched" style="color: red;">
              <span *ngIf="address.errors?.['required']">Address is required.</span>
            </span>
          </div>
        </div>
        
        <!-- Gender Field -->
        <div class="input-div">
          <div class="input-divs">
            <mat-form-field appearance="fill">
              <mat-label>Gender</mat-label>
              <mat-select [(ngModel)]="user.gender" name="gender" required #gender="ngModel">
                <mat-option value="male">Male</mat-option>
                <mat-option value="female">Female</mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="gender.invalid && gender.touched" style="color: red;">
              <span *ngIf="gender.errors?.['required']">Gender is required.</span>
            </span>
          </div>
        </div>
        
        <!-- Date of Birth Field -->
        <div class="input-div">
          <div class="input-divs">
            <input type="date" id="dateOfBirth" [(ngModel)]="user.dateOfBirth" #dateOfBirth="ngModel"
                   name="dateOfBirth" required placeholder="Date of Birth">
            <span *ngIf="dateOfBirth.invalid && dateOfBirth.touched" style="color: red;">
              <span *ngIf="dateOfBirth.errors?.['required']">Date of Birth is required.</span>
            </span>
          </div>
        </div>
        
        <button [disabled]="signupForm.invalid" type="submit">Register</button>
  
        <div id="login-link-div">
          <p id="login-text">Already have an account?</p>
          <a routerLink="/login" id="login-link">Login</a>
        </div>
      </form>
    </div>
    <div  *ngIf="otpSent">
      <form class="otp-div" #otpForm="ngForm" (submit)="verifyOtp(formOtp.fOtp)">
        <p  id="otp-heading">OTP Authentication</p>
        <input id="otp-input" type="text"  [(ngModel)]="formOtp.fOtp" #fOtp="ngModel" name="fOtp" required placeholder="Enter OTP">
        <button id="otp-btn" type="submit">Verify OTP</button>
  
      </form>
    </div>
  </div>
